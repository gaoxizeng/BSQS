<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="/frontend/css/css.css" rel="stylesheet" type="text/css" />
<link href="/frontend/css/common.css" rel="stylesheet" tyle="text/css" />
<script src="/frontend/js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/frontend/js/jquery.SuperSlide.2.1.1.js" type="text/javascript"></script>
<script src="/frontend/js/common_js.js" type="text/javascript"></script>
<title>用户注册</title>
</head>

<body>
<!--顶部样式-->
<div class="common_top">
 <div class="Narrow">
  <div class=" left logo"><a href="#"><img src="/frontend/images/logo.png" /></a></div>
  <!--电话图层-->
  <div class="phone"><label>全国服务热线：</label><em>400-345-5633</em></div>
 </div>
</div>
<!--用户注册样式-->
<div class="registered_style Narrow clearfix">
   <div class="left_advertising">
    <img src="/frontend/images/bg_03.png" />
   </div>
   <div class="right_register">
     <div class="register_Switching" id="register_Switching">
       <div class="hd">
        <ul><li>快速注册</li><li>普通注册</li></ul>
       </div>
       <div class="bd">
        <ul>
         <form id="form" name="form" method="post" action=""> 
     <div class="form clearfix">  
        <div class="item"><label class="rgister-label">手&nbsp;&nbsp;机&nbsp;&nbsp;号：</label>
          <input name="" type="text"  class="text" id="tel" /></div>
          <div class="item">
          <label class="rgister-label" >密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码：</label>
          <input name="user_pwd" id="pwd" type="password"  class="text" id="user_pwd"/><b>*</b><span class="r"></span></div>
        <div class="item"><label class="rgister-label" >验&nbsp;&nbsp;证&nbsp;&nbsp;码：</label>
          <input name="" type="text"  class="text" id="code" /><a class="phone_verification" id="getCode">获取验证码</a></div> 
 
       </div>
       <div class="rgister-btn">
         <a href="javascript:void(0)" class="btn_rgister" id="btn">注&nbsp;&nbsp;&nbsp;&nbsp;册</a>
    </div>
    <div class="Note"><span class="login_link">已是会员<a href="{:url('login/login')}">请登录</a></span></div>    
       </form>
        </ul>
        <ul>
  <form id="form1" name="form1" method="post" action="{:url('login/regist_do')}"> 
     <div class="form clearfix">  
      <div class="item"><label class="rgister-label">用&nbsp;&nbsp;户&nbsp;&nbsp;名：</label><input name="user_name" type="text" id="user_name" class="text" /><b>*</b></div><span id="span1"></span>
    <div class="item"><label class="rgister-label" >密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码：</label><input name="user_pwd" type="password"  class="text" id="user_pwd"/><b>*</b><span class="r"></span></div> <span id="span2"></span>
    <!--   <div class="Password_qd"><ul><li class="r">弱</li><li class="z">中</li><li class="q">强</li></ul></div> -->
    <div class="item"><label class="rgister-label " >确认密码：</label><input name="user_upwd" type="password"  class="text" id="user_upwd" /><b>*</b></div><span id="span3"></span>
      <div class="item"><label class="rgister-label" >电子邮箱：</label><input name="user_email" type="text" id="user_email" class="text" /><b>*</b></div> <span id="span4"></span>
   <div class="item"><label class="rgister-label" >手机号：</label><input name="user_tel" type="text"  class="text" id="user_tel" /><b>*</b></div> <span id="span5"></span> 
      <div class="item "><label  class="rgister-label ">验&nbsp;证&nbsp;码：</label><input name="captcha" type="text"  class="Recommend_text" />   
      {:captcha_img()}
      </div>

    </div>  
    <div class="rgister-btn">
      <input type="submit" class="btn_rgister" value='注&nbsp;&nbsp;&nbsp;&nbsp;册'/>
    </div>
    <div class="Note"><span class="login_link">已是会员<a href="{:url('login/login')}">请登录</a></span></div>    
    </form>
        </ul>
       </div>
     </div>
     <script>jQuery(".register_Switching").slide({trigger:"click"});</script>
    </div>
</div>
<!--底部样式-->
 <div class="bottom_footer">
   <p><a href="#">关于我们</a> | <a href="#">联系我们</a> | <a href="#">商家入驻</a> | <a href="#">法律申明</a> | <a href="#">友情链接</a>  </p>
   <p>Copyright©2014四川金祥保险销售有限公司.All Rights Reserved. </p>
   <p>川ICP备09150084号</p>
   </div>
</body>
</html>
<!-- <script src="/jquery.js"></script> -->
<script>
  var a = false;
  var b = false;
  var c = false;
  var d = false;
  var e = false;
  $(document).on('blur','#user_name',function(){
    // alert(324)
    var name = $('#user_name').val();
    // alert(name)
    var pre = /^\D[A-Za-z0-9]{5,9}$/i;
    if(pre.test(name)){
      $('#span1').html('<font></font>');
       a = true;
    }
    else {
      $('#span1').html('<font color="red">用户名不能以数字开头，6-10位字母数字</font>');
       a = false;
    }
  })
  $(document).on('blur','#user_pwd',function(){
      // alert(324)
      var pwd = $('#user_pwd').val();
      // alert(name)
      var pre = /^\d{8,20}$/i;
      if(!pre.test(pwd)){
         $('#span2').html('<font color="red">密码必须以8-20位数字</font>');
         b = false;
      }
      else {
        var reg1 = /^[0-9]{8,10}$/i;
        var reg2 = /^[0-9]{10,15}$/i;
        var reg4 = /^[0-9]{15,20}$/i;
        if(reg1.test(pwd)){
          $('.r').html('<font color="red">弱</font>');
          b = true;
        }else if(reg2.test(pwd)){
          $('.r').html('<font color="red">中</font>');
          b = true;
        }else if (reg4.test(pwd)){
          $('.r').html('<font color="red">强</font>');
          b = true;
        }
      }
    })
  $(document).on('blur','#user_upwd',function(){
      // alert(324)
      var pwd = $('#user_pwd').val();
      var user_upwd = $('#user_upwd').val();
      // alert(name)
      if(user_upwd == pwd){
        $('#span3').html('<font></font>');
         c = true;
      }
      else {
        $('#span3').html('<font color="red">确认密码需要与密码一致</font>');
         c = false;
      }
    })
  $(document).on('blur','#user_tel',function(){
    // alert(324)
    var phone = $('#user_tel').val();
    // alert(name)
    var pre = /^1[3,5,7][1,9,0,6,5]\d{8}$/i;
    if(pre.test(phone)){
      $('#span5').html('<font></font>');
       d = true;
    }
    else {
      $('#span5').html('<font color="red">手机号输十一位格式</font>');
       d = false;
    }
  })
  $(document).on('blur','#user_email',function(){
    // alert(324)
    var email = $('#user_email').val();
    // alert(name)
    var pre = /^\w+@\w+.(com|net)$/i;
    if(pre.test(email)){
      $('#span4').html('<font></font>');
       e =true;
    }
    else {
      $('#span4').html('<font color="red">邮箱格式是如..@...com|net</font>');
      e = false;
    }
  })
  function _all(){
    if(a && b && c && d && e){
      return  true;
    }
    else {
      return  false;
    }
  }

  $(document).on('click','#getCode',function(){
      var tel = $('#tel').val();
      if(tel==''){
          return;
      }
      $.ajax({
        url:"{:url('login/telnote')}",
        data:{tel:tel},
        dataType:'json',
        type:"get",
        success:function(msg){
            if(msg==1){
              $(document).on('click','#btn',function(){
                var code = $('#code').val();
                var tel = $('#tel').val();
                var pwd = $('#pwd').val();
                if(code==''){return;}
                if(tel==''){return;}
                  $.ajax({
                    url:"{:url('login/telnote_do')}",
                    data:{code:code,tel:tel,pwd:pwd},
                    dataType:'json',
                    type:"get",
                    success:function(res){
                    
                        if(res==2){
                            alert('你的手机号已注册,请登录');
                            history.go(0);
                        }else if(res==1){
                            alert('注册成功,请登录');
                            window.location.href="{:url('login/login')}";
                        }else{
                          alert('注册失败');
                          history.go(0);
                        }
                  }
                })
              })
            }else{
                alert('发送短信失败');
            }
        }
      })
    })



</script>